#!/bin/bash

source /home/eth/eth2/t1

uex 'WARNING: WARNING: THIS IS AN IRREVERSIBLE OPERATION'
uex 'WARNING: WITHDRAWING STAKED ETH WILL NOT BE POSSIBLE UNTIL THE MERGE'
uex 'WARNING: TO ENTER AGAIN YOU GO TO A LONG QUEUE'
uex 'QUER MESMO EXIT MY VALIDATORS?';read rsp
if [[ $rsp = sim && ! -f $p1/vc_slash && ! -f $p1/vc_lock && -f $p1/vc_keys && -x $s0/lighthouse ]]; then
  if [[ $B = mainnet ]]; then
    blkc=""
  else
    blkc="--testnet $B"
  fi
  uex 'EXIT VALIDATORS'
  if [[ -f $p8/validator_definitions.yml ]]; then
    nex "STORE($K) WALLET($W)"
    for kst in $(ls $p8/*.json)
    do nex "lighthouse $blkc --datadir $p1 account validator exit --keystore $kst"
    done
  else
    uex '\nCHAVES AINDA NAO FORAM IMPORTADAS'
  fi
  uex 'LIGTH: CONFIGURE VALIDATOR'
else
  uex 'NAO EXISTEM VALIDATORS TO EXIT'
fi
