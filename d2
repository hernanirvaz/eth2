#!/bin/bash

echo "--> Creating RAID-0 array (/dev/md0)..."
sudo mdadm --create --verbose /dev/md0 --level=0 --raid-devices=3 /dev/nvme0n1p2 /dev/nvme1n1p1 /dev/nvme2n1p1
sync
echo "--> Probing devices immediately after RAID creation..."
sudo partprobe # Attempt to force kernel update
sleep 15
sync
echo "--> Verification (mdstat after probe):"
cat /proc/mdstat
echo "--> Verification (lsblk after probe):"
lsblk /dev/md0
