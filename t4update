#!/bin/bash

i="\n\e[5m"
f="\e[25m\n"

ethg="eth-geth"
ethb="eth-beacon"
ethv="eth-validator"
ethp="prometheus"
ethn="prometheus-node-exporter"
ethf="grafana-server"

if [ "$1" = "linux" ] || [ -z "$1" ]; then
  echo -e "${i}FULL-UPGRADE${f}"
  echo $H|sudo -S apt update -y 2>/dev/null
  sudo apt full-upgrade -y && sudo apt dist-upgrade -y
  sudo apt autoremove
  sudo apt autoclean
  # Enable automatic updates so you don't have to manually install them.
  # sudo apt install unattended-upgrades
  # sudo dpkg-reconfigure -plow unattended-upgrades
fi

if [ "$1" = "eth" ] || [ -z "$1" ]; then
  if [ -f ~/.rustup/settings.toml ]; then
    echo -e "${i}RUST UPDATE${f}"
    rustup update
  fi
  if [ -x /usr/local/bin/lighthouse ]; then
    echo -e "${i}LIGHTHOUSE UPDATE${f}"
    t6 tpr
    cd ~/lighthouse
    git pull
    make
    echo -e "\n$H\n"
    echo $H|sudo -S mv /usr/local/bin/lighthouse /usr/local/bin/lighthouse.save 2>/dev/null
    sudo cp ~/.cargo/bin/lighthouse /usr/local/bin
    t6 ta
  fi
fi
